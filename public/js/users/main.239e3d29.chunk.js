(this["webpackJsonpuser-react-web-client"]=this["webpackJsonpuser-react-web-client"]||[]).push([[0],{13:function(e,a,t){},18:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),s=t(5),l=t.n(s),c=(t(13),t(4)),i=t(1),o=function(e,a){switch(a.type){case"FetchDataSuccess":return Object(i.a)(Object(i.a)({},e),{},{users:a.payload.users});case"FetchDataFailure":return Object(i.a)(Object(i.a)({},e),{},{alert:{show:!0,type:"danger",message:"Could not load remote data: ".concat(a.payload.error)}});case"HandleViewUser":return Object(i.a)(Object(i.a)({},e),{},{onViewUser:!0,onAddUser:!1,onEditUser:!1,user:a.payload.user});case"HandleCloseViewUser":return Object(i.a)(Object(i.a)({},e),{},{onViewUser:!1,user:null});case"HandleOnAddUser":return Object(i.a)(Object(i.a)({},e),{},{onAddUser:!0,onEditUser:!1,alert:Object(i.a)(Object(i.a)({},e.alert),{},{show:!1})});case"HandleCancelCreate":return Object(i.a)(Object(i.a)({},e),{},{onAddUser:!1});case"BeforeCreateUser":return Object(i.a)(Object(i.a)({},e),{},{alert:{show:!0,type:"info",message:"Creating User. Please wait!"}});case"CreateUserSuccess":var t=e.users;return t.push(a.payload.user),Object(i.a)(Object(i.a)({},e),{},{users:t,onAddUser:!1,alert:{show:!0,type:"success",message:"User successfully created!"}});case"CreateUserFailure":return Object(i.a)(Object(i.a)({},e),{},{alert:{show:!0,type:"danger",message:"Could not create User: ".concat(a.payload.error)}});case"BeforeDeleteUser":return Object(i.a)(Object(i.a)({},e),{},{alert:{show:!0,type:"info",message:"Deleting User. Please wait!"}});case"DeleteUserSuccess":var r=e.users,n=r.findIndex((function(e){return e.id===a.payload.id}));return r.splice(n,1),Object(i.a)(Object(i.a)({},e),{},{onViewUser:!1,users:r,alert:{show:!0,type:"success",message:"User successfully deleted!"}});case"DeleteUserFailure":return Object(i.a)(Object(i.a)({},e),{},{onViewUser:!1,alert:{show:!0,type:"danger",message:"Could not delete User: ".concat(a.payload.error)}});case"BeforeUpdateUser":return Object(i.a)(Object(i.a)({},e),{},{alert:{show:!0,type:"info",message:"Updating User. Please wait!"}});case"HandleCancelUpdate":return Object(i.a)(Object(i.a)({},e),{},{onEditUser:!1});case"HandleEditUser":var s=e.users,l=s.findIndex((function(e){return e.id===a.payload.id})),c=s[l];return Object(i.a)(Object(i.a)({},e),{},{onEditUser:!0,User:c,onAddUser:!1,alert:Object(i.a)(Object(i.a)({},e.alert),{},{show:!1})});case"UpdateUserSuccess":var o=e.users,m=o.findIndex((function(e){return e.id===a.payload.user.id}));return o[m]=a.payload.user,Object(i.a)(Object(i.a)({},e),{},{onViewUser:!1,users:o,User:a.payload.user,onEditUser:!1,alert:{show:!0,type:"success",message:"User successfully updated!"}});case"UpdateUserFailure":return Object(i.a)(Object(i.a)({},e),{},{onViewUser:!1,alert:{show:!0,type:"danger",message:"Could not update User: ".concat(a.payload.error)}});case"HandleCloseAlert":return Object(i.a)(Object(i.a)({},e),{},{alert:{show:!1,message:"",type:""}});default:return e}},m=t(2),d=t.n(m),u=t(3),p=function(){var e=Object(u.a)(d.a.mark((function e(a,t){var r,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"BeforeCreateUser"}),e.prev=1,e.next=4,fetch("/user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 4:if((r=e.sent).ok){e.next=7;break}throw new Error(r.statusText);case 7:return e.next=9,r.json();case 9:n=e.sent,t({type:"CreateUserSuccess",payload:{user:n}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t({type:"CreateUserFailure",payload:{error:e.t0}});case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(a,t){return e.apply(this,arguments)}}(),E=function(){var e=Object(u.a)(d.a.mark((function e(a,t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"BeforeDeleteUser"}),e.prev=1,e.next=4,fetch("/user/".concat(a),{method:"DELETE"});case 4:if((r=e.sent).ok){e.next=7;break}throw new Error(r.statusText);case 7:t({type:"DeleteUserSuccess",payload:{id:a}}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t({type:"DeleteUserFailure",payload:{error:e.t0}});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(a,t){return e.apply(this,arguments)}}(),h=function(){var e=Object(u.a)(d.a.mark((function e(a,t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"BeforeUpdateUser"}),e.prev=1,e.next=4,fetch("/Users/".concat(a.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 4:if((r=e.sent).ok){e.next=7;break}throw new Error(r.statusText);case 7:return e.next=9,r.json();case 9:t({type:"UpdateUserSuccess",payload:{user:a}}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t({type:"UpdateUserFailure",payload:{error:e.t0}});case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(a,t){return e.apply(this,arguments)}}(),f=function(){var e=Object(u.a)(d.a.mark((function e(a){var t,r,n,s=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>1&&void 0!==s[1]?s[1]:{},e.prev=1,e.next=4,fetch("/user?findOptions=".concat(encodeURI(JSON.stringify(t))));case 4:if((r=e.sent).ok){e.next=7;break}throw new Error(r.statusText);case 7:return e.next=9,r.json();case 9:n=e.sent,a({type:"FetchDataSuccess",payload:{usersCount:n.count,users:n.users}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),a({type:"FetchDataFailure",payload:{error:e.t0}});case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(a){return e.apply(this,arguments)}}(),v=t(6),b=function(e){var a=e.message,t=e.type,r=e.onClickHandler;return n.a.createElement(v.Notification,{color:t,onClick:r},a,n.a.createElement(v.Button,{remove:!0}))},N=function(e){var a=e.user,t=Object(r.useContext)(j);return n.a.createElement("tr",null,n.a.createElement("td",null,a.code),n.a.createElement("td",null,a.name),n.a.createElement("td",null,a.contactFirstName),n.a.createElement("td",null,a.contactLastName),n.a.createElement("td",null,a.email),n.a.createElement("td",null,a.defaultURLSlug),n.a.createElement("td",null,a.active),n.a.createElement("td",null,n.a.createElement("div",{className:"buttons are-small"},n.a.createElement("button",{className:"button is-link",onClick:function(){t.dispatch({type:"HandleViewUser",payload:{user:a}})}},"View Detail"),n.a.createElement("button",{className:"button is-warning",onClick:function(){t.dispatch({type:"HandleEditUser",payload:{id:a.id}})}},"Edit"),n.a.createElement("button",{className:"button is-danger",onClick:function(){window.confirm("This action cannot be reversed! Are you sure you want to delete?")&&t.handleDeleteUser(a.id,t.dispatch)}},"Delete"))))},y=function(){return n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null,"First Name"),n.a.createElement("th",null,"Last Name"),n.a.createElement("th",null,"Gender"),n.a.createElement("th",null,"Email"),n.a.createElement("th",null,"Date Of Birth")))},w=function(e){var a;return a=e.users.map((function(e){return n.a.createElement(N,{user:e})})),n.a.createElement("div",{className:"table is-striped is-narrow is-hoverable"},n.a.createElement("caption",null,n.a.createElement("h3",null,"Available Users")),n.a.createElement(y,null),n.a.createElement("tbody",null,a))},U=function(e){var a={firstName:"",middleName:"",lastName:"",commonName:"",gender:"",dateOfBirth:new Date,isActive:!1,primaryEmailAddress:"",isPrimaryEmailAddressVerified:!1,passwordSalt:"",passwordHash:"",isPasswordChangeRequired:!1,resetPasswordToken:"",resetPasswordExpiration:new Date,primaryEmailVerificationToken:"",otpEnabled:!1,otpSecret:"",customTheme:{name:"",description:"",properties:"",bulmaProperties:{primaryColor:"",primaryBackground:""}}},t=Object(r.useState)(Object(i.a)({},a)),s=Object(c.a)(t,2),l=s[0],o=s[1],m=Object(r.useState)(new Date),d=Object(c.a)(m,2),u=(d[0],d[1],function(e){var a=l,t=e.target;a[t.name]=t.value,o(Object(i.a)({},a))});return n.a.createElement("div",{className:"columns is-mobile"},n.a.createElement("div",{className:"column is-two-thirds"},n.a.createElement("div",{className:"box"},n.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e.handleCreateUser(l,e.dispatch)}},n.a.createElement("legend",null,"Add User:"),n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"First Name"),n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:"input",type:"text",placeholder:"Code input",name:"code",value:l.firstName,onChange:u,required:!0}))),n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"Last Name"),n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:"input",type:"text",placeholder:"Last name",name:"name",value:l.lastName,onChange:u,required:!0}))),n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"Gender"),n.a.createElement("div",{className:"control"},n.a.createElement("select",{className:"input",placeholder:"gender",value:l.gender,onChange:u,required:!0},n.a.createElement("option",{value:"Male"},"Male"),n.a.createElement("option",{value:"Female"},"Female")))),n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"Email"),n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:"input",type:"text",placeholder:"Email Address",name:"contactFirstName",value:l.contactFirstName,onChange:u,required:!0})),n.a.createElement("p",{className:"help is-info"},"Enter a valid email here")),n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"Date Of Birth"),n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:"input",type:"date",placeholder:"Date of birth",name:"dateOfBirth",value:"string"==typeof l.dateOfBirth?Date.parse(l.dateOfBirth):void 0,onChange:u}))),n.a.createElement("div",{className:"field is-grouped"},n.a.createElement("div",{className:"control"},n.a.createElement("button",{className:"button is-link"},"Submit")),n.a.createElement("div",{className:"control"},n.a.createElement("button",{className:"button is-link is-light",onClick:function(){e.dispatch({type:"HandleCancelCreate"})}},"Cancel")))))))},O=function(e){var a={firstName:e.user.firstName,middleName:e.user.middleName,lastName:e.user.lastName,commonName:e.user.commonName,gender:e.user.gender,dateOfBirth:e.user.dateOfBirth,isActive:e.user.isActive,primaryEmailAddress:e.user.primaryEmailAddress,isPrimaryEmailAddressVerified:e.user.isPrimaryEmailAddressVerified,passwordSalt:e.user.passwordSalt,passwordHash:e.user.passwordHash,isPasswordChangeRequired:e.user.isPasswordChangeRequired,resetPasswordToken:e.user.resetPasswordToken,resetPasswordExpiration:e.user.resetPasswordExpiration,primaryEmailVerificationToken:e.user.primaryEmailVerificationToken,otpEnabled:e.user.otpEnabled,otpSecret:e.user.otpSecret},t=Object(r.useState)(Object(i.a)({},a)),s=Object(c.a)(t,2),l=s[0],o=s[1],m=function(e){var a=l,t=e.target;a[t.name]=t.value,o(Object(i.a)({},a))};return n.a.createElement("div",{className:"columns is-mobile"},n.a.createElement("div",{className:"column is-two-thirds"},n.a.createElement("div",{className:"box"},n.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e.handleUpdateUser(l,e.dispatch)}},n.a.createElement("legend",null,"Edit User:"),n.a.createElement("input",{type:"hidden",name:"id",value:l.id,readOnly:!0}),n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"First Name"),n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:"input",type:"text",placeholder:"Code input",name:"code",value:l.firstName,onChange:m,required:!0}))),n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"Last Name"),n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:"input",type:"text",placeholder:"Last name",name:"name",value:l.lastName,onChange:m,required:!0}))),n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"Gender"),n.a.createElement("div",{className:"control"},n.a.createElement("select",{className:"input",placeholder:"gender",value:l.gender,onChange:m,required:!0},n.a.createElement("option",{value:"Male"},"Male"),n.a.createElement("option",{value:"Female"},"Female")))),n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"Email"),n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:"input",type:"text",placeholder:"Email Address",name:"contactFirstName",value:l.contactFirstName,onChange:m,required:!0})),n.a.createElement("p",{className:"help is-info"},"Enter a valid email here")),n.a.createElement("div",{className:"field"},n.a.createElement("label",{className:"label"},"Date Of Birth"),n.a.createElement("div",{className:"control"},n.a.createElement("input",{className:"input",type:"date",placeholder:"Date of birth",name:"dateOfBirth",value:"string"==typeof l.dateOfBirth?Date.parse(l.dateOfBirth):void 0,onChange:m}))),n.a.createElement("div",{className:"field is-grouped"},n.a.createElement("div",{className:"control"},n.a.createElement("button",{className:"button is-link"},"Submit")),n.a.createElement("div",{className:"control"},n.a.createElement("button",{className:"button is-link is-light",onClick:function(){e.dispatch({type:"HandleCancelCreate"})}},"Cancel")))))))},g=function(e){var a=e.user,t=Object(r.useContext)(j);return n.a.createElement("div",{className:"modal is-active"},n.a.createElement("div",{className:"modal-background"}),n.a.createElement("div",{className:"modal-card"},n.a.createElement("header",{className:"modal-card-head"},n.a.createElement("p",{className:"modal-card-title"},"Details of ".concat(a.firstName," ").concat(a.lastName)),n.a.createElement("button",{className:"delete","aria-label":"close",onClick:function(){t.dispatch({type:"HandleCloseViewUser"})}})),n.a.createElement("section",{className:"modal-card-body"},n.a.createElement("div",{className:"columns"},n.a.createElement("div",{className:"column is-two-fifths"},"ID:"),n.a.createElement("div",{className:"column"},a.id)),n.a.createElement("div",{className:"columns"},n.a.createElement("div",{className:"column is-two-fifths"},"First Name:"),n.a.createElement("div",{className:"column"},a.firstName)),n.a.createElement("div",{className:"columns"},n.a.createElement("div",{className:"column is-two-fifths"},"Contact lastname:"),n.a.createElement("div",{className:"column"},a.lastName)),n.a.createElement("div",{className:"columns"},n.a.createElement("div",{className:"column is-two-fifths"},"Email:"),n.a.createElement("div",{className:"column"},a.primaryEmailAddress)),n.a.createElement("div",{className:"columns"},n.a.createElement("div",{className:"column is-two-fifths"},"Gender:"),n.a.createElement("div",{className:"column"},a.gender)),n.a.createElement("div",{className:"columns"},n.a.createElement("div",{className:"column is-two-fifths"},"Active:"),n.a.createElement("div",{className:"column"},a.isActive?"Yes":"No"))),n.a.createElement("footer",{className:"modal-card-foot"},n.a.createElement("div",{className:"buttons are-small"},n.a.createElement("button",{className:"button is-warning",onClick:function(){t.dispatch({type:"HandleEditUser",payload:{id:a.id}})}},"Edit"),n.a.createElement("button",{className:"button is-danger",onClick:function(){window.confirm("This action cannot be reversed! Are you sure you want to delete?")&&t.handleDeleteUser(a.id,t.dispatch)}},"Delete")))))},j=n.a.createContext(null),C=function(e){e.jwtToken;var a=Object(r.useReducer)(o,{users:[],user:null,onAddUser:!1,onViewUser:!1,onEditUser:!1,alert:{show:!1,message:"",type:""}}),t=Object(c.a)(a,2),s=t[0],l=t[1],i={};Object(r.useEffect)((function(){f(l,i)}),[]);var m=n.a.createElement(b,{type:s.alert.type,message:s.alert.message,onClickHandler:function(){l({type:"HandleCloseAlert"})}});return s.onEditUser&&null!==s.user?n.a.createElement("div",{className:"container "},n.a.createElement("div",{className:"content is-medium"},n.a.createElement("p",null,n.a.createElement(O,{user:s.user,handleUpdateUser:h,dispatch:l})),n.a.createElement("p",null,s.alert.show&&m),n.a.createElement("p",null,n.a.createElement(j.Provider,{value:{dispatch:l,handleDeleteUser:E}},n.a.createElement(w,{users:s.users}))))):s.onAddUser?n.a.createElement("div",{className:"container "},n.a.createElement("div",{className:"content is-medium"},n.a.createElement("p",null,n.a.createElement(U,{handleCreateUser:p,dispatch:l})),n.a.createElement("p",null,s.alert.show&&m),n.a.createElement("p",null,n.a.createElement(j.Provider,{value:{dispatch:l,handleDeleteUser:E}},n.a.createElement(w,{users:s.users}))))):s.onViewUser&&null!=s.user?n.a.createElement("div",{className:"container "},n.a.createElement("div",{className:"content is-medium"},n.a.createElement("p",null,n.a.createElement(j.Provider,{value:{dispatch:l,handleDeleteUser:E}},n.a.createElement(g,{user:s.user}))))):n.a.createElement("div",{className:"container "},n.a.createElement("div",{className:"content is-medium"},n.a.createElement("p",null,n.a.createElement("button",{className:"button is-outline",onClick:function(){l({type:"HandleOnAddUser"})}},"+ Add User")),n.a.createElement("p",null,s.alert.show&&m),n.a.createElement("p",null,n.a.createElement(j.Provider,{value:{dispatch:l,handleDeleteUser:E}},n.a.createElement(w,{users:s.users})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(C,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,a,t){e.exports=t(18)}},[[8,1,2]]]);
//# sourceMappingURL=main.239e3d29.chunk.js.map