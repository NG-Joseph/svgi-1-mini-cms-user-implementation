(this["webpackJsonpuser-react-web-client"]=this["webpackJsonpuser-react-web-client"]||[]).push([[0],{17:function(e,a,t){"use strict";t.r(a);var r=t(0),s=t.n(r),n=t(5),l=t.n(n),c=t(4),i=t(1),o=function(e,a){switch(a.type){case"FetchDataSuccess":return Object(i.a)(Object(i.a)({},e),{},{users:a.payload.users});case"FetchDataFailure":return Object(i.a)(Object(i.a)({},e),{},{alert:{show:!0,type:"danger",message:"Could not load remote data: ".concat(a.payload.error)}});case"HandleViewUser":return Object(i.a)(Object(i.a)({},e),{},{onViewUser:!0,onAddUser:!1,onEditUser:!1,user:a.payload.user});case"HandleCloseViewUser":return Object(i.a)(Object(i.a)({},e),{},{onViewUser:!1,user:null});case"HandleOnAddUser":return Object(i.a)(Object(i.a)({},e),{},{onAddUser:!0,onEditUser:!1,alert:Object(i.a)(Object(i.a)({},e.alert),{},{show:!1})});case"HandleCancelCreate":return Object(i.a)(Object(i.a)({},e),{},{onAddUser:!1});case"BeforeCreateUser":return Object(i.a)(Object(i.a)({},e),{},{alert:{show:!0,type:"info",message:"Creating user. Please wait!"}});case"CreateUserSuccess":var t=e.users;return t.push(a.payload.user),Object(i.a)(Object(i.a)({},e),{},{users:t,onAddUser:!1,alert:{show:!0,type:"success",message:"User successfully created!"}});case"CreateUserFailure":return Object(i.a)(Object(i.a)({},e),{},{alert:{show:!0,type:"danger",message:"Could not create user: ".concat(a.payload.error)}});case"BeforeDeleteUser":return Object(i.a)(Object(i.a)({},e),{},{alert:{show:!0,type:"info",message:"Deleting user. Please wait!"}});case"DeleteUserSuccess":var r=e.users,s=r.findIndex((function(e){return e.id===a.payload.id}));return r.splice(s,1),Object(i.a)(Object(i.a)({},e),{},{onViewUser:!1,users:r,alert:{show:!0,type:"success",message:"User successfully deleted!"}});case"DeleteUserFailure":return Object(i.a)(Object(i.a)({},e),{},{onViewUser:!1,alert:{show:!0,type:"danger",message:"Could not delete user: ".concat(a.payload.error)}});case"BeforeUpdateUser":return Object(i.a)(Object(i.a)({},e),{},{alert:{show:!0,type:"info",message:"Updating user. Please wait!"}});case"HandleCancelUpdate":return Object(i.a)(Object(i.a)({},e),{},{onEditUser:!1});case"HandleEditUser":var n=e.users,l=n.findIndex((function(e){return e.id===a.payload.id})),c=n[l];return Object(i.a)(Object(i.a)({},e),{},{onEditUser:!0,user:c,onAddUser:!1,alert:Object(i.a)(Object(i.a)({},e.alert),{},{show:!1})});case"UpdateUserSuccess":var o=e.users,m=o.findIndex((function(e){return e.id===a.payload.user.id}));return o[m]=a.payload.user,Object(i.a)(Object(i.a)({},e),{},{onViewUser:!1,users:o,user:a.payload.user,onEditUser:!1,alert:{show:!0,type:"success",message:"User successfully updated!"}});case"UpdateUserFailure":return Object(i.a)(Object(i.a)({},e),{},{onViewUser:!1,alert:{show:!0,type:"danger",message:"Could not update user: ".concat(a.payload.error)}});case"HandleCloseAlert":return Object(i.a)(Object(i.a)({},e),{},{alert:{show:!1,message:"",type:""}});default:return e}},m=t(2),d=t.n(m),u=t(3),p=function(){var e=Object(u.a)(d.a.mark((function e(a,t){var r,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"BeforeCreateUser"}),e.prev=1,e.next=4,fetch("http://127.0.0.1:3008/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 4:if(r=e.sent,console.log(r),console.log(a),r.ok){e.next=9;break}throw new Error(r.statusText);case 9:return e.next=11,r.json();case 11:s=e.sent,t({type:"CreateUserSuccess",payload:{user:s}}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),t({type:"CreateUserFailure",payload:{error:e.t0}});case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(a,t){return e.apply(this,arguments)}}(),E=function(){var e=Object(u.a)(d.a.mark((function e(a,t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"BeforeDeleteUser"}),e.prev=1,e.next=4,fetch("/users/".concat(a),{method:"DELETE"});case 4:if((r=e.sent).ok){e.next=7;break}throw new Error(r.statusText);case 7:t({type:"DeleteUserSuccess",payload:{id:a}}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t({type:"DeleteUserFailure",payload:{error:e.t0}});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(a,t){return e.apply(this,arguments)}}(),v=function(){var e=Object(u.a)(d.a.mark((function e(a,t){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"BeforeUpdateUser"}),e.prev=1,e.next=4,fetch("/users/".concat(a.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 4:if((r=e.sent).ok){e.next=7;break}throw new Error(r.statusText);case 7:return e.next=9,r.json();case 9:t({type:"UpdateUserSuccess",payload:{user:a}}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t({type:"UpdateUserFailure",payload:{error:e.t0}});case 15:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(a,t){return e.apply(this,arguments)}}(),h=function(){var e=Object(u.a)(d.a.mark((function e(a){var t,r,s,n=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>1&&void 0!==n[1]?n[1]:{},e.prev=1,e.next=4,fetch("/users?findOptions=".concat(encodeURI(JSON.stringify(t))));case 4:if((r=e.sent).ok){e.next=7;break}throw new Error(r.statusText);case 7:return e.next=9,r.json();case 9:s=e.sent,a({type:"FetchDataSuccess",payload:{usersCount:s.count,users:s.users}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),a({type:"FetchDataFailure",payload:{error:e.t0}});case 16:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(a){return e.apply(this,arguments)}}(),N=t(6),f=function(e){var a=e.message,t=e.type,r=e.onClickHandler;return s.a.createElement(N.Notification,{color:t,onClick:r},a,s.a.createElement(N.Button,{remove:!0}))},b=function(e){var a=e.user,t=Object(r.useContext)(j);return s.a.createElement("tr",null,s.a.createElement("td",null,a.firstName),s.a.createElement("td",null,a.lastName),s.a.createElement("td",null,a.gender),s.a.createElement("td",null,a.primaryEmailAddress),s.a.createElement("td",null,a.passwordSalt),s.a.createElement("td",null,s.a.createElement("div",{className:"buttons are-small"},s.a.createElement("button",{className:"button is-link",onClick:function(){t.dispatch({type:"HandleViewUser",payload:{user:a}})}},"View Detail"),s.a.createElement("button",{className:"button is-warning",onClick:function(){t.dispatch({type:"HandleEditUser",payload:{id:a.id}})}},"Edit"),s.a.createElement("button",{className:"button is-danger",onClick:function(){window.confirm("This action cannot be reversed! Are you sure you want to delete?")&&t.handleDeleteUser(a.id,t.dispatch)}},"Delete"))))},y=function(){return s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"First Name"),s.a.createElement("th",null,"Last Name"),s.a.createElement("th",null,"Gender"),s.a.createElement("th",null,"Email"),s.a.createElement("th",null,"Date Of Birth")))},w=function(e){var a;return a=e.users.map((function(e){return s.a.createElement(b,{user:e})})),s.a.createElement("div",{className:"table is-striped is-narrow is-hoverable"},s.a.createElement("caption",null,s.a.createElement("h3",null,"Available users")),s.a.createElement(y,null),s.a.createElement("tbody",null,a))},U=function(e){var a={firstName:"",middleName:"",lastName:"",commonName:"",gender:"",dateOfBirth:new Date,isActive:!1,primaryEmailAddress:"",isPrimaryEmailAddressVerified:!1,passwordSalt:"",passwordHash:"",isPasswordChangeRequired:!1,resetPasswordToken:"",resetPasswordExpiration:new Date,primaryEmailVerificationToken:"",otpEnabled:!1,otpSecret:"",profile:{name:"",description:"",properties:"",bulmaProperties:{primaryColor:"",primaryBackground:""}}},t=Object(r.useState)(Object(i.a)({},a)),n=Object(c.a)(t,2),l=n[0],o=n[1],m=function(e){var a=l,t=e.target;a[t.name]=t.value,o(Object(i.a)({},a))};return s.a.createElement("div",{className:"columns is-mobile"},s.a.createElement("div",{className:"column is-two-thirds"},s.a.createElement("div",{className:"box"},s.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e.handleCreateUser(l,e.dispatch)}},s.a.createElement("legend",null,"Add User:"),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"First Name"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"text",placeholder:"Name",name:"firstName",value:l.firstName,onChange:m,required:!0}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Last Name"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"text",placeholder:"Last Name",name:"lastName",value:l.lastName,onChange:m,required:!0}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Gender"),s.a.createElement("div",{className:"control"},s.a.createElement("select",{className:"input",placeholder:"gender",name:"gender",value:l.gender,onChange:m,required:!0},s.a.createElement("option",{value:"Male"},"Male"),s.a.createElement("option",{value:"Female"},"Female")))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Email"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"text",placeholder:"Email Address",name:"primaryEmailAddress",value:l.primaryEmailAddress,onChange:m,required:!0})),s.a.createElement("p",{className:"help is-info"},"Enter a valid email here")),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Password"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"password",name:"passwordSalt",value:l.passwordSalt,onChange:m}))),s.a.createElement("div",{className:"field is-grouped"},s.a.createElement("div",{className:"control"},s.a.createElement("button",{className:"button is-link"},"Submit")),s.a.createElement("div",{className:"control"},s.a.createElement("button",{className:"button is-link is-light",onClick:function(){e.dispatch({type:"HandleCancelCreate"})}},"Cancel")))))))},g=function(e){var a={id:e.user.id,firstName:e.user.firstName,middleName:e.user.middleName,lastName:e.user.lastName,commonName:e.user.commonName,gender:e.user.gender,dateOfBirth:e.user.dateOfBirth,primaryEmailAddress:e.user.primaryEmailAddress,isPrimaryEmailAddressVerified:e.user.isPrimaryEmailAddressVerified,passwordSalt:e.user.passwordSalt,passwordHash:e.user.passwordHash,isPasswordChangeRequired:e.user.isPasswordChangeRequired,resetPasswordToken:e.user.resetPasswordToken,otpSecret:e.user.otpSecret,primaryEmailVerificationToken:e.user.primaryEmailVerificationToken,otpEnabled:e.user.otpEnabled},t=Object(r.useState)(Object(i.a)({},a)),n=Object(c.a)(t,2),l=n[0],o=n[1],m=function(e){var a=l,t=e.target;a[t.name]=t.value,o(Object(i.a)({},a))};return s.a.createElement("div",{className:"columns is-mobile"},s.a.createElement("div",{className:"column is-two-thirds"},s.a.createElement("div",{className:"box"},s.a.createElement("form",{onSubmit:function(a){a.preventDefault(),e.handleUpdateUser(l,e.dispatch)}},s.a.createElement("legend",null,"Add User:"),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"First Name"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"text",placeholder:"Name",name:"code",value:l.firstName,onChange:m,required:!0}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Last Name"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"text",placeholder:"Last name",name:"name",value:l.lastName,onChange:m,required:!0}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Gender"),s.a.createElement("div",{className:"control"},s.a.createElement("select",{className:"input",placeholder:"gender",value:l.gender,onChange:m,required:!0},s.a.createElement("option",{value:"Male"},"Male"),s.a.createElement("option",{value:"Female"},"Female")))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Email"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"email",placeholder:"Email Address",name:"primaryEmailAddress",value:l.primaryEmailAddress,onChange:m,required:!0})),s.a.createElement("p",{className:"help is-info"},"Enter a valid email here")),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Password"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"password",name:"passwordSalt",value:l.passwordSalt,onChange:m}))),s.a.createElement("div",{className:"field is-grouped"},s.a.createElement("div",{className:"control"},s.a.createElement("button",{className:"button is-link"},"Submit")),s.a.createElement("div",{className:"control"},s.a.createElement("button",{className:"button is-link is-light",onClick:function(){e.dispatch({type:"HandleCancelUpdate"})}},"Cancel")))))))},O=function(e){var a=e.user,t=Object(r.useContext)(j);return s.a.createElement("div",{className:"modal is-active"},s.a.createElement("div",{className:"modal-background"}),s.a.createElement("div",{className:"modal-card"},s.a.createElement("header",{className:"modal-card-head"},s.a.createElement("p",{className:"modal-card-title"},"Details of ".concat(a.firstName," ").concat(a.lastName)),s.a.createElement("button",{className:"delete","aria-label":"close",onClick:function(){t.dispatch({type:"HandleCloseViewUser"})}})),s.a.createElement("section",{className:"modal-card-body"},s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-two-fifths"},"ID:"),s.a.createElement("div",{className:"column"},a.id)),s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-two-fifths"},"First Name:"),s.a.createElement("div",{className:"column"},a.firstName)),s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-two-fifths"},"Contact lastname:"),s.a.createElement("div",{className:"column"},a.lastName)),s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-two-fifths"},"Email:"),s.a.createElement("div",{className:"column"},a.primaryEmailAddress)),s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-two-fifths"},"Gender:"),s.a.createElement("div",{className:"column"},a.gender)),s.a.createElement("div",{className:"columns"},s.a.createElement("div",{className:"column is-two-fifths"},"Active:"),s.a.createElement("div",{className:"column"},a.isActive?"Yes":"No"))),s.a.createElement("footer",{className:"modal-card-foot"},s.a.createElement("div",{className:"buttons are-small"},s.a.createElement("button",{className:"button is-warning",onClick:function(){t.dispatch({type:"HandleEditUser",payload:{id:a.id}})}},"Edit"),s.a.createElement("button",{className:"button is-danger",onClick:function(){window.confirm("This action cannot be reversed! Are you sure you want to delete?")&&t.handleDeleteUser(a.id,t.dispatch)}},"Delete")))))},j=s.a.createContext(null),C=function(e){e.jwtToken;var a=Object(r.useReducer)(o,{users:[],user:null,onAddUser:!1,onViewUser:!1,onEditUser:!1,alert:{show:!1,message:"",type:""}}),t=Object(c.a)(a,2),n=t[0],l=t[1],i={};Object(r.useEffect)((function(){h(l,i)}),[]);var m=s.a.createElement(f,{type:n.alert.type,message:n.alert.message,onClickHandler:function(){l({type:"HandleCloseAlert"})}});return n.onEditUser&&null!==n.user?s.a.createElement("div",{className:"container "},s.a.createElement("div",{className:"content is-medium"},s.a.createElement("p",null,s.a.createElement(g,{user:n.user,handleUpdateUser:v,dispatch:l})),s.a.createElement("p",null,n.alert.show&&m),s.a.createElement("p",null,s.a.createElement(j.Provider,{value:{dispatch:l,handleDeleteUser:E}},s.a.createElement(w,{users:n.users}))))):n.onAddUser?s.a.createElement("div",{className:"container "},s.a.createElement("div",{className:"content is-medium"},s.a.createElement("p",null,s.a.createElement(U,{handleCreateUser:p,dispatch:l})),s.a.createElement("p",null,n.alert.show&&m),s.a.createElement("p",null,s.a.createElement(j.Provider,{value:{dispatch:l,handleDeleteUser:E}},s.a.createElement(w,{users:n.users}))))):n.onViewUser&&null!=n.user?s.a.createElement("div",{className:"container "},s.a.createElement("div",{className:"content is-medium"},s.a.createElement("p",null,s.a.createElement(j.Provider,{value:{dispatch:l,handleDeleteUser:E}},s.a.createElement(O,{user:n.user}))))):s.a.createElement("div",{className:"container "},s.a.createElement("div",{className:"content is-medium"},s.a.createElement("p",null,s.a.createElement("button",{className:"button is-outline",onClick:function(){l({type:"HandleOnAddUser"})}},"+ Add User")),s.a.createElement("p",null,n.alert.show&&m),s.a.createElement("p",null,s.a.createElement(j.Provider,{value:{dispatch:l,handleDeleteUser:E}},s.a.createElement(w,{users:n.users})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var k=document.getElementById("initial-props").getAttribute("data-json"),x=JSON.parse(k||"");l.a.hydrate(s.a.createElement(C,x),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,a,t){e.exports=t(17)}},[[8,1,2]]]);
//# sourceMappingURL=main.e7d4717e.chunk.js.map